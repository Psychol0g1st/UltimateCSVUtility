import"../chunks/NZTpNUN0.js";import{i as W}from"../chunks/D6zjB1v5.js";import{o as ra}from"../chunks/DplQCmCy.js";import{c as X,a2 as Y,a6 as ia,a7 as na,f as h,s as l,d as e,t as V,g as a,a9 as H,ac as va,u as b,a8 as j,a5 as ca,b as g,a4 as Z,B as U,ab as da,e as q,aa as ma,r as s,ad as pa,a as aa,h as ua,$ as fa}from"../chunks/DupkCdS9.js";import{i as B}from"../chunks/BFY9oKHF.js";import{p as G,s as _a,a as ba,b as P}from"../chunks/B9VibhMn.js";import{e as ga,i as ha,r as Q,H as za,F as xa}from"../chunks/DlUbGzVA.js";import{b as ya,D as ka,F as Sa,d as I,r as wa,a as ja}from"../chunks/b2DuSRPc.js";import{b as $a,c as Ca}from"../chunks/Bq9RdimH.js";function Da($){return function(...d){var p=d[0];return p.preventDefault(),$?.apply(this,d)}}var Oa=h("<option> </option>"),Fa=h('<br/><small class="text-muted"> </small>',1),Ta=h('<div class="mb-3"><div class="alert alert-info py-2"><i class="bi bi-columns-gap me-1"></i> <span class="fw-semibold"> </span> <!></div></div>'),Aa=h('<div class="card shadow-sm mb-3"><div class="card-body"><h5 class="card-title mb-3">Oszlop szétbontása új oszlopokra</h5> <form autocomplete="off"><div class="mb-3"><label class="form-label fw-semibold" for="split-col-select">Oszlop kiválasztása bontáshoz</label> <select id="split-col-select" class="form-select"><option>-- Válasszon oszlopot --</option><!></select></div> <div class="mb-3"><label class="form-label fw-semibold" for="split-sep-input">Elválasztó karakter</label> <input id="split-sep-input" type="text" class="form-control" placeholder="pl. , vagy ; vagy |"/></div> <div class="mb-3"><div class="form-check"><input id="remove-original-check" type="checkbox" class="form-check-input"/> <label class="form-check-label" for="remove-original-check">Eredeti oszlop eltávolítása bontás után</label></div></div> <!> <button type="submit" class="btn btn-primary"><i class="bi bi-scissors me-1"></i> Oszlop szétbontása</button></form></div></div>');function ta($,d){Y(d,!1);let p=G(d,"columns",28,()=>[]),u=G(d,"data",28,()=>[]),v=G(d,"onSplit",12),o=H(""),m=H(", "),f=H(!0),c=H([]);function C(){if(!a(o)||!a(m))return;const t=ka.splitColumnToNewColumns(u(),a(o),a(m),a(f));v()(t)}ia(()=>(a(o),ma(u()),a(m)),()=>{if(a(o)&&u().length){const t=u().map(r=>(r[a(o)]??"").split(a(m)).length),n=Math.max(...t);j(c,Array.from({length:n},(r,S)=>`${a(o)} ${S+1}`))}else j(c,[])}),na(),W();var z=Aa(),x=e(z),y=l(e(x),2),D=e(y),O=l(e(D),2);V(()=>{a(o),va(()=>{p()})});var F=e(O);F.value=F.__value="";var K=l(F);ga(K,1,p,ha,(t,n)=>{var r=Oa(),S=e(r,!0);s(r);var w={};V(()=>{q(S,a(n)),w!==(w=a(n))&&(r.value=(r.__value=a(n))??"")}),g(t,r)}),s(O),s(D);var i=l(D,2),k=l(e(i),2);Q(k),s(i);var _=l(i,2),T=e(_),M=e(T);Q(M),pa(2),s(T),s(_);var N=l(_,2);{var R=t=>{var n=Ta(),r=e(n),S=l(e(r)),w=l(S),ea=e(w,!0);s(w);var sa=l(w,2);{var la=E=>{var J=Fa(),L=l(aa(J)),oa=e(L);s(L),V(()=>q(oa,`Az eredeti "${a(o)??""}" oszlop megmarad.`)),g(E,J)};B(sa,E=>{a(f)||E(la)})}s(r),s(n),V(E=>{q(S,` ${a(c),b(()=>a(c).length)??""} új oszlop jön létre: `),q(ea,E)},[()=>(a(c),b(()=>a(c).join(", ")))],da),g(t,n)};B(N,t=>{a(c),b(()=>a(c).length>0)&&t(R)})}var A=l(N,2);return s(y),s(x),s(z),V(()=>A.disabled=!a(o)||!a(m)),ya(O,()=>a(o),t=>j(o,t)),$a(k,()=>a(m),t=>j(m,t)),Ca(M,()=>a(f),t=>j(f,t)),ca("submit",y,Da(C)),g($,z),Z({get columns(){return p()},set columns(t){p(t),U()},get data(){return u()},set data(t){u(t),U()},get onSplit(){return v()},set onSplit(t){v(t),U()}})}X(ta,{columns:{},data:{},onSplit:{}},[],[],!0);var Ea=h('<div class="row justify-content-center mt-4"><div class="col-12 col-lg-8 col-xl-7"><!></div></div>'),Va=h('<div class="row justify-content-center mt-4"><div class="col-12 col-lg-8 col-xl-7"><!></div></div> <!>',1),Ha=h(`<div class="d-flex flex-column min-vh-100"><!> <main class="flex-grow-1"><div class="container py-4"><div class="mb-4 text-center"><h2 class="fw-bold mb-2"><i class="bi bi-scissors text-primary me-2"></i> Oszlopfelosztó</h2> <p class="text-muted mb-0">Töltsön fel CSV/TSV fájlt, osszon fel egy oszlopot elválasztójel alapján, és exportálja az
          eredményt.</p></div> <div class="row justify-content-center"><div class="col-12 col-lg-8 col-xl-7"><!></div></div> <!></div></main> <!></div>`);function Ma($,d){Y(d,!1);const[p,u]=ba(),v=()=>_a(I,"$dataStore",p);let o=H([]);ra(()=>{wa()});function m({data:i,newColumns:k}){j(o,i),P(I,b(v).transformedData=i,b(v)),P(I,b(v).columns=Object.keys(i[0]??{}),b(v))}W();var f=Ha();ua(i=>{fa.title="Oszlopfelosztó | Adateszköz Készlet"});var c=e(f);za(c);var C=l(c,2),z=e(C),x=l(e(z),2),y=e(x),D=e(y);Sa(D,{}),s(y),s(x);var O=l(x,2);{var F=i=>{var k=Va(),_=aa(k),T=e(_),M=e(T);ta(M,{get columns(){return v().columns},get data(){return v().originalData},onSplit:m}),s(T),s(_);var N=l(_,2);{var R=A=>{var t=Ea(),n=e(t),r=e(n);ja(r,{get data(){return a(o)},filename:"felosztott_oszlopok.csv",label:"Felosztott oszlopok exportálása"}),s(n),s(t),g(A,t)};B(N,A=>{a(o).length>0&&A(R)})}g(i,k)};B(O,i=>{v().originalData.length>0&&i(F)})}s(z),s(C);var K=l(C,2);xa(K,{}),s(f),g($,f),Z(),u()}X(Ma,{},[],[],!0);export{Ma as component};
