import"../chunks/NZTpNUN0.js";import{i as ua}from"../chunks/D6zjB1v5.js";import{o as pa}from"../chunks/DplQCmCy.js";import{c as _a,a2 as fa,f as k,h as za,$ as ba,d as s,s as r,b as f,a4 as ka,t as z,g as e,a9 as H,ac as L,ab as O,a8 as N,a5 as P,u as b,r as o,e as q,ad as ga}from"../chunks/DupkCdS9.js";import{i as B}from"../chunks/BFY9oKHF.js";import{H as xa,F as ha,e as Q,i as W}from"../chunks/DlUbGzVA.js";import{F as $a,d as R,a as ya,b as X,D as Da,r as Na}from"../chunks/b2DuSRPc.js";import{s as Ra,a as Sa,b as M}from"../chunks/B9VibhMn.js";function ja(m){return m.normalize("NFKD").replace(/[\u0300-\u036f]/g,"")}function wa(m){if(typeof m!="string")return"";let a=ja(m);return a=a.trim(),a=a.replace(/ /g,"_"),a=a.replace(/,/g,"_"),a=a.replace(/\./g,"_"),a=a.replace(/\//g,"-"),a=a.replace(/=/g,"-"),a=a.replace(/"/g,""),a=a.replace(/\(/g,""),a=a.replace(/\)/g,""),a=a.replace(/[^A-Za-z0-9_-]/g,""),a}function Ca(m,a,S){const c=String(m[a]??"").trim();let t=String(m[S]??"").trim();if(c!==""){const d=wa(c);return d!==c?(t=t?`${t}, ${c}`:c,{normalized:d,updatedRef:t,original:c}):{normalized:c,updatedRef:t,original:""}}else return{normalized:c,updatedRef:t,original:c}}var Va=k("<option> </option>"),Fa=k("<option> </option>"),Ta=k('<button type="button" class="btn btn-secondary"><i class="bi bi-arrow-counterclockwise me-1"></i> Visszaállítás eredeti állapotra</button>'),Aa=k(`<div class="alert alert-success d-flex align-items-center mb-4" role="alert"><i class="bi bi-check-circle-fill me-2"></i> Normalizálás kész! A(z) "<strong> </strong>" oszlop normalizálva
                lett.</div>`),Ka=k('<div class="row justify-content-center mt-4"><div class="col-12 col-lg-8 col-xl-7"><div class="card shadow-sm mb-4"><div class="card-body"><h5 class="card-title mb-3"><i class="bi bi-gear me-2"></i> Normalizálási beállítások</h5> <div class="mb-3"><label for="sku-column" class="form-label fw-semibold">Válassza ki a normalizálandó cikkszám oszlopot</label> <select id="sku-column" class="form-select"><option>-- Válasszon cikkszám oszlopot --</option><!></select></div> <div class="mb-3"><label for="backup-column" class="form-label fw-semibold">Válassza ki az eredeti cikkszám tárolására szolgáló oszlopot</label> <select id="backup-column" class="form-select"><option>-- Válasszon biztonsági mentési oszlopot --</option><!></select></div> <div class="d-flex gap-2"><button type="button" class="btn btn-primary"><i class="bi bi-magic me-1"></i> Normalizálás végrehajtása</button> <!></div></div></div> <!> <!></div></div>'),Ea=k('<div class="d-flex flex-column min-vh-100"><!> <main class="flex-grow-1"><div class="container py-4"><div class="mb-4 text-center"><h2 class="fw-bold mb-2"><i class="bi bi-upc-scan text-primary me-2"></i> Cikkszám Normalizáló</h2> <p class="text-muted mb-0">Töltsön fel CSV/TSV fájlt, normalizálja a cikkszám oszlopokat, és exportálja az eredményt.</p></div> <div class="row justify-content-center"><div class="col-12 col-lg-8 col-xl-7"><!></div></div> <!></div></main> <!></div>');function Ha(m,a){fa(a,!1);const[S,c]=Sa(),t=()=>Ra(R,"$dataStore",S);let d=H(""),p=H(""),_=H(!1);pa(()=>{Na()});function Y(){if(!e(d)||!e(p)){alert("Kérjük válassza ki mind a cikkszám oszlopot, mind a biztonsági mentési oszlopot");return}let v=Da.addColumnToTable(t().originalData,"Régi cikkszám","");v=v.map(g=>{const{normalized:x,updatedRef:D,original:h}=Ca(g,e(d),e(p));return{...g,[e(d)]:x,[e(p)]:D,"Régi cikkszám":h}});let u=t().columns;u.includes("Régi cikkszám")||(u=[...u,"Régi cikkszám"]),M(R,b(t).transformedData=v,b(t)),M(R,b(t).columns=u,b(t)),N(_,!0)}function aa(){M(R,b(t).transformedData=[...t().originalData],b(t)),N(_,!1)}ua();var j=Ea();za(v=>{ba.title="Cikkszám Normalizáló | Adateszköz Készlet"});var U=s(j);xa(U);var w=r(U,2),Z=s(w),C=r(s(Z),2),G=s(C),ea=s(G);$a(ea,{}),o(G),o(C);var ta=r(C,2);{var sa=v=>{var u=Ka(),g=s(u),x=s(g),D=s(x),h=r(s(D),2),V=r(s(h),2);z(()=>{e(d),L(()=>{t()})});var F=s(V);F.value=F.__value="";var ia=r(F);Q(ia,1,()=>t().columns,W,(i,l)=>{var n=Va(),$=s(n,!0);o(n);var y={};z(()=>{q($,e(l)),y!==(y=e(l))&&(n.value=(n.__value=e(l))??"")}),f(i,n)}),o(V),o(h);var T=r(h,2),A=r(s(T),2);z(()=>{e(p),L(()=>{t()})});var K=s(A);K.value=K.__value="";var ra=r(K);Q(ra,1,()=>t().columns,W,(i,l)=>{var n=Fa(),$=s(n,!0);o(n);var y={};z(()=>{q($,e(l)),y!==(y=e(l))&&(n.value=(n.__value=e(l))??"")}),f(i,n)}),o(A),o(T);var I=r(T,2),E=s(I),la=r(E,2);{var na=i=>{var l=Ta();P("click",l,aa),f(i,l)};B(la,i=>{e(_)&&i(na)})}o(I),o(D),o(x);var J=r(x,2);{var ca=i=>{var l=Aa(),n=r(s(l),2),$=s(n,!0);o(n),ga(),o(l),z(()=>q($,e(d))),f(i,l)};B(J,i=>{e(_)&&i(ca)})}var da=r(J,2);const ma=O(()=>e(_)?t().transformedData:t().originalData),va=O(()=>e(_)?"Normalizált adatok exportálása":"Eredeti adatok exportálása");ya(da,{get data(){return e(ma)},filename:"normalizalt_cikkszamok.csv",get label(){return e(va)}}),o(g),o(u),z(()=>E.disabled=!e(d)||!e(p)),X(V,()=>e(d),i=>N(d,i)),X(A,()=>e(p),i=>N(p,i)),P("click",E,Y),f(v,u)};B(ta,v=>{t().originalData.length>0&&v(sa)})}o(Z),o(w);var oa=r(w,2);ha(oa,{}),o(j),f(m,j),ka(),c()}_a(Ha,{},[],[],!0);export{Ha as component};
