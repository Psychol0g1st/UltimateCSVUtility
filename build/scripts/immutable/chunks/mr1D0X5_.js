import"./NZTpNUN0.js";import{i as X}from"./D6zjB1v5.js";import{k as H,l as te,aX as ae,n as re,y as ie,a_ as se,m as le,c as V,a2 as W,f as S,t as z,ac as ne,d as o,s as m,b as E,a4 as L,B as C,r as c,u as N,aa as O,e as D,a5 as G,g as w,a9 as M,a8 as B,ad as I}from"./DupkCdS9.js";import{i as U}from"./BFY9oKHF.js";import{s as oe}from"./CB-CiqKI.js";import{p as k}from"./B9VibhMn.js";import{w as ce}from"./D6RimAtI.js";function de(s,a,e){var r=s==null?"":""+s;return r===""?null:r}function ue(s,a,e,r,t,i){var l=s.__className;if(H||l!==e||l===void 0){var n=de(e);(!H||n!==s.getAttribute("class"))&&(n==null?s.removeAttribute("class"):s.className=n),s.__className=e}return i}function J(s,a,e=!1){if(s.multiple){if(a==null)return;if(!ie(a))return se();for(var r of s.options)r.selected=a.includes(R(r));return}for(r of s.options){var t=R(r);if(le(t,a)){r.selected=!0;return}}(!e||a!==void 0)&&(s.selectedIndex=-1)}function me(s){var a=new MutationObserver(()=>{J(s,s.__value)});a.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),re(()=>{a.disconnect()})}function ve(s,a,e=a){var r=!0;te(s,"change",t=>{var i=t?"[selected]":":checked",l;if(s.multiple)l=[].map.call(s.querySelectorAll(i),R);else{var n=s.querySelector(i)??s.querySelector("option:not([disabled])");l=n&&R(n)}e(l)}),ae(()=>{var t=a();if(J(s,t,r),r&&t===void 0){var i=s.querySelector(":checked");i!==null&&(t=R(i),e(t))}s.__value=t,r=!1}),me(s)}function R(s){return"__value"in s?s.__value:s.value}class K{static parse(a,e=","){const[r,...t]=a.split(`
`);let i=r.split(e).map(l=>l.trim());return i=i.map((l,n)=>l!==""?l:`Oszlop${n+1}`),t.map(l=>{const n=l.split(e),p={};return i.forEach((d,f)=>{p[d]=(n[f]??"").replace(/\r$/,"")}),p})}static stringify(a,e=","){if(!a.length)return"";const r=Object.keys(a[0]),t=r.join(e),i=a.map(l=>r.map(n=>l[n]??"").join(e));return[t,...i].join(`
`)}}class fe{static export(a,e){const r=new Blob([a],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(r),t.setAttribute("download",e),document.body.appendChild(t),t.click(),document.body.removeChild(t)}}var pe=S('<label><select class="form-select form-select-sm" style="width:auto;display:inline-block;"><option>Vessző (,)</option><option>Tab (\\t)</option><option>Pontosvessző (;)</option><option>Függőleges vonal (|)</option><option>Szóköz ( )</option></select></label>');function P(s,a){W(a,!1);let e=k(a,"delimiter",12,"	");var r=pe(),t=o(r);z(()=>{e(),ne(()=>{})});var i=o(t);i.value=i.__value=",";var l=m(i);l.value=l.__value="	";var n=m(l);n.value=n.__value=";";var p=m(n);p.value=p.__value="|";var d=m(p);return d.value=d.__value=" ",c(t),c(r),ve(t,e),E(s,r),L({get delimiter(){return e()},set delimiter(f){e(f),C()}})}V(P,{delimiter:{}},[],[],!0);var be=S('<div class="form-text text-danger mt-2"><i class="bi bi-exclamation-circle me-1"></i> Nincs exportálható adat.</div>'),_e=S('<div class="card shadow-sm mb-4"><div class="card-body"><div class="d-flex flex-column flex-md-row align-items-md-end gap-3"><div><label class="form-label fw-semibold mb-1">Elválasztójel</label> <!></div> <div class="flex-grow-1"></div> <button class="btn btn-success px-4" type="button"><i class="bi bi-download me-2"></i> </button></div> <!></div></div>');function ge(s,a){W(a,!1);let e=k(a,"data",28,()=>[]),r=k(a,"delimiter",12,"	"),t=k(a,"filename",12,"export.csv"),i=k(a,"label",12,"Exportálás");function l(){if(!e().length)return;const u=K.stringify(e(),r());fe.export(u,t())}X();var n=_e(),p=o(n),d=o(p),f=o(d),x=m(o(f),2);P(x,{get delimiter(){return r()},set delimiter(u){r(u)},$$legacy:!0}),c(f);var b=m(f,4),j=m(o(b));c(b),c(d);var T=m(d,2);{var F=u=>{var q=be();E(u,q)};U(T,u=>{O(e()),N(()=>!e().length)&&u(F)})}return c(p),c(n),z(()=>{b.disabled=(O(e()),N(()=>!e().length)),oe(b,"aria-disabled",(O(e()),N(()=>!e().length))),D(j,` ${i()??""}`)}),G("click",b,l),E(s,n),L({get data(){return e()},set data(u){e(u),C()},get delimiter(){return r()},set delimiter(u){r(u),C()},get filename(){return t()},set filename(u){t(u),C()},get label(){return i()},set label(u){i(u),C()}})}V(ge,{data:{},delimiter:{},filename:{},label:{}},[],[],!0);const Q={originalData:[],transformedData:[],columns:[],delimiter:",",filename:""},Y=ce(Q);function ze(){Y.set(Q)}var he=S('<div class="alert alert-info d-flex align-items-center" role="status"><div class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></div> <span><strong> </strong> feldolgozása...</span></div>'),xe=S('<div class="alert alert-success d-flex align-items-center" role="status"><i class="bi bi-check-circle-fill me-2"></i> <span><strong> </strong> sikeresen betöltve</span></div>'),ye=S('<div class="card shadow-sm mb-4"><div class="card-body"><div class="d-flex align-items-center mb-3"><i class="bi bi-cloud-upload-fill text-primary me-2 fs-4"></i> <h5 class="card-title mb-0"> </h5></div> <div class="mb-3"><label class="form-label fw-semibold">Elválasztójel</label> <!></div> <div class="mb-3"><label class="form-label fw-semibold" for="fileInput">Fájl kiválasztása</label> <input type="file" id="fileInput" accept=".csv,.tsv,text/csv,text/tab-separated-values" aria-describedby="fileHelp"/> <div id="fileHelp" class="form-text"><i class="bi bi-info-circle me-1"></i> Támogatott formátumok: CSV, TSV fájlok</div></div> <!> <!></div></div>');function we(s,a){W(a,!1);let e=k(a,"delimiter",12,"	"),r=k(a,"label",12,"CSV/TSV feltöltése"),t=M(!1),i=M("");function l(v){const _=v.target;if(!_.files||_.files.length===0)return;const g=_.files[0];B(t,!0),B(i,g.name);const h=new FileReader;h.onload=()=>{try{const y=h.result,A=K.parse(y,e());Y.update(ee=>({...ee,originalData:A,transformedData:A,columns:Object.keys(A[0]??{}),delimiter:e(),filename:g.name}))}catch(y){console.error("Error parsing file:",y)}finally{B(t,!1)}},h.readAsText(g,"utf-8")}X();var n=ye(),p=o(n),d=o(p),f=m(o(d),2),x=o(f,!0);c(f),c(d);var b=m(d,2),j=m(o(b),2);P(j,{get delimiter(){return e()},set delimiter(v){e(v)},$$legacy:!0}),c(b);var T=m(b,2),F=m(o(T),2);I(2),c(T);var u=m(T,2);{var q=v=>{var _=he(),g=m(o(_),2),h=o(g),y=o(h,!0);c(h),I(),c(g),c(_),z(()=>D(y,w(i))),E(v,_)};U(u,v=>{w(t)&&v(q)})}var Z=m(u,2);{var $=v=>{var _=xe(),g=m(o(_),2),h=o(g),y=o(h,!0);c(h),I(),c(g),c(_),z(()=>D(y,w(i))),E(v,_)};U(Z,v=>{w(i)&&!w(t)&&v($)})}return c(p),c(n),z(()=>{D(x,r()),ue(F,1,`form-control ${w(t)?"is-valid":""}`),F.disabled=w(t)}),G("change",F,l),E(s,n),L({get delimiter(){return e()},set delimiter(v){e(v),C()},get label(){return r()},set label(v){r(v),C()}})}V(we,{delimiter:{},label:{}},[],[],!0);class Re{static mapColumn(a,e,r){return a.map(t=>({...t,[e]:r(t[e]??"")}))}static filterColumns(a,e){return a.map(r=>Object.fromEntries(e.map(t=>[t,r[t]??""])))}static normalizeColumn(a,e,r){return this.mapColumn(a,e,r)}static renameColumns(a,e,r){if(!a||!e||!r)throw new Error("Invalid parameters for renaming columns");return a.map(t=>{const i={};return e.forEach((l,n)=>{i[r[n]||l]=t[l]}),i})}static addColumnToTable(a,e,r="",t=!1){return a.map(i=>({...i,[e]:t||!(e in i)?r:i[e]}))}static removeRowsByValue(a,e,r){return a.filter(t=>(t[e]??"")!==r)}static removeEmptyRows(a,e){return a.filter(r=>(r[e]??"").trim()!=="")}static removeRowsByCondition(a,e,r){return a.filter(t=>{const i=t[e]??"";return!r(i)})}static replaceInColumn(a,e,r,t){return this.mapColumn(a,e,i=>i.replace(new RegExp(r,"g"),t))}static addPrefixToColumn(a,e,r){return this.mapColumn(a,e,t=>r+t)}static addSuffixToColumn(a,e,r){return this.mapColumn(a,e,t=>t+r)}static removeSubstringFromColumn(a,e,r){return this.mapColumn(a,e,t=>t.replace(new RegExp(r,"g"),""))}static replaceByCondition(a,e,r,t,i){return this.mapColumn(a,e,l=>{switch(r){case"contains":return l.includes(t)?i:l;case"equals":return l===t?i:l;case"isEmpty":return l.trim()===""?i:l;case"startsWith":return l.startsWith(t)?i:l;case"endsWith":return l.endsWith(t)?i:l;default:return l}})}static splitColumnToNewColumns(a,e,r,t=!0){const i=a.map(d=>(d[e]??"").split(r).length),l=Math.max(...i),n=Array.from({length:l},(d,f)=>`${e} ${f+1}`);return{data:a.map(d=>{const f=(d[e]??"").split(r),x={...d};return n.forEach((b,j)=>{x[b]=(f[j]??"").trim()}),t&&delete x[e],x}),newColumns:n}}}export{Re as D,we as F,ge as a,ve as b,Y as d,ze as r,ue as s};
